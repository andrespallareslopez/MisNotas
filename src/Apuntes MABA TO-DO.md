# Lista tareas TO-DO

- [] Comprobar que el agent pool llamado Azure pipelines establezcan el parallel job a 1 o que podamos lanzar tareas en dicho agente, de momento eso, por parte de microsoft no me lo ha activado.Ya hice el tramite burocratico este lunes, tardan entre 4 y 6 dias, aun a lo mejor es pronto, para reclamarlo otra vez.
- [*] Implementar Probar a subir por ftp la aplicacion en un azure app service.
- [] Terminar de terminar de configurar un app service de prueba, o utilizar uno de los que ya hay en dev, con sus variables de entorno y tratar de levantar la aplicacion y que funcione, que realmente a desplegado sin problemas, y que los paquetes o binarios de la aplicacion, son los correctos, y estan en su ubicacion correcta, con su configuracion correcta, para levantar la aplicacion.
- [] Tenemos un sonar comunity instalado en un azure instance container, muy simple, desde la pipeline, y lanza analisis de sonar y los publica a esa instancia, pero si paramos el contenedor, pierde los datos, utiliza como base de datos H2, una base de datos de prueba en memoria, tenemos que instalarlo de manera que establezcamos una base de datos en postgre o sql server.
- [] Ver, investigar que en sonar, cuando haya empeoramiento de codigo, con una linea base de codigo, pare el proceso y no siga, compilando o desplegar. Pero antes hay que desplegar un sonar con base de datos.
- [] Los agentes auto hospedados que estoy utilizando en azure devops, estan de momento registrados en mis maquinas, estoy haciendo pruebas, uno que implenta un linux, y otro que esta implementado en una maquina virtual con windows server. Hay que instalar un agente en linux, o bien, dentro de una maquina virtual con linux en azure, o bien dentro de un contenedor, con azure container instance.
- [] El arranque del servicio en linux, lo estoy haciendo manual, ejecutando run.sh manualmente, hay un svc.sh, hay que investigar como arrancar el agente en modo, que arranque automaticamente, cuando se inicia el contenedo, o arrange linux en una maquina virtual, en windows, esto ya lo he hecho, pero en linux tengo que mirarlo, por eso importante si tenemos el agente que suministra microsoft Azure pipelines, que esto ya viene por defecto y es de tipo linux.
- [] En los agentes de tipo linux, hay un problema cuando lanzo dentro de ese tipo de agente la tarea de analisis de sonar en azure devops, no puede lanzar dicha tarea por un problema de comunicacion, no se si llamarlo un problema de comunicacion saliente, o sea tiene que lanzar peticiones dentro del agente de linux tal como http://servidorsonar.com/api/server/version o cosas por el estilo, no lo puede hacer, tengo que ver como se configura, porque comentan que necesita una configuracion adicional en linux, o si esta dentro de la configuracion del contenedo, aunque no creo, e investigar eso, es un tema de configuracion de linux para solventar esto, por eso he tenido que crear un agente en una maquina virtural de windows, porque desde las maquinas de windows si permite hacer llamadas http como las que he puesto arriba.
- [*] Cuando estoy haciendo el build y empaquetado de la aplicacion, creo un zip, pero realmente es un fichero tar, pero tengo que terminar de probar una vez que tengamos permisos con el service connection al Azure resorce manager, para crear un conector totalmente funcional, que tenga los permisos pertinentes, para poder terminar de hacer las pruebas de despligue. 


- [] Tenemos que tener permisos desde azure devops para manipular los azures app service, desplegar, parar, arrancar, reinicializar los azures app service y otros objeto, para que se puedan utilizar los scripts pertinentes de despliegue en dichos azures app service. Aqui intervienen los service principal y los Managed Identities, todo esto relacionado con Microsoft Entra Id, y que se manejan desde este apartado de azure, y que no tenemos permisos.

- [] Tener en cuenta que ahora mismo estoy haciendo la pruebas en azure devops, el repositorio de codigo esta bajo azure repos, no bajo gitlab

- [] Mirar los webhook, y otras opciones, mirar si hay alguna manera mas de conectarse desde azure devops, en el pasado la habia bajo azure devops de conectarse a un gitlab, investigar que opciones puede haber a dia de hoy bajo azure devops, aparte de los webhooks, porque hay que mirar si se puede enlazar con gitlab, a traves de los webhook

- [] Mirar montar un jenckins, pero tenemos las mismas, cuando tengamos que desplegar a un azure app service, con powershell, por ejemplo, no tenemos los permisos suficientes para desplegar, reinicializar, parar,arrancar un servicio azure app service, necesario para poder desplegar, necesitamos poder crear  service principal, o Manage identities, o cualquier otra opcion relacionada con Microsoft Entra ID. Esto ultimo no tenemos acceso, esta bloqueado por directivas de seguridad en nuestras subscripciones.

- [] Conectarse con powershell, con az CLI a los objeto de azure y manipularlos con la herramienta de comando.

- [] Comenzar a utilizar terraform y plantillas ARM para aprovisionar infra de azure, recopilar los ficheros terraform que tenga guardados de otros proyectos.

